(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[5],{35:function(e,t,a){"use strict";var c=a.p+"static/media/error.42292aa1.gif",n=a(3);t.a=function(){return Object(n.jsx)("img",{src:c,alt:"",style:{displat:"block",width:"250px",height:"250px",objectFit:"contain",margin:"auto"}})}},36:function(e,t,a){"use strict";var c=a(4),n=a.n(c),r=a(6),s=a(5),i=a(0);t.a=function(){var e=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(i.useState)(null),l=Object(s.a)(o,2),u=l[0],h=l[1];return{loading:a,request:Object(i.useCallback)(function(){var e=Object(r.a)(n.a.mark((function e(t){var a,r,s,i,o,l=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,s=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"appliation/json"},c(!0),e.prev=4,e.next=7,fetch(t,{method:a,body:r,headers:s});case 7:if((i=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(i.status));case 10:return e.next=12,i.json();case 12:return o=e.sent,c(!1),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(4),c(!1),h(e.t0.message),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:u,clearError:Object(i.useCallback)((function(){return h(null)}),[])}}(),t=e.loading,a=e.request,c=e.error,o=e.clearError,l="https://gateway.marvel.com:443/v1/public/",u="apikey=cf00dd4f15fa1298d6d5af85d670c37c",h=210,j=function(){var e=Object(r.a)(n.a.mark((function e(){var t,c,r=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:h,e.next=3,a("".concat(l,"characters?limit=9&offset=").concat(t,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(m));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(n.a.mark((function e(t){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("".concat(l,"characters/").concat(t,"?&").concat(u));case 2:return c=e.sent,e.abrupt("return",m(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(r.a)(n.a.mark((function e(t){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("".concat(l,"characters?name=").concat(t,"&").concat(u));case 2:return c=e.sent,e.abrupt("return",c.data.results.map(m));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return{id:e.id,name:e.name,description:e.description?e.description:"Description is missing..",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}},f=function(){var e=Object(r.a)(n.a.mark((function e(){var t,c,r=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:h,e.next=3,a("".concat(l,"comics?orderBy=issueNumber&limit=8&offset=").concat(t,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(p));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(r.a)(n.a.mark((function e(){var t,c,r=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1045,e.next=3,a("".concat(l,"comics/").concat(t,"?").concat(u));case 3:return c=e.sent,e.abrupt("return",p(c.data.results[0]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){var t;return{id:e.id,title:e.title,description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," p."):"No information about the number of pages",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,language:(null===(t=e.textObjects[0])||void 0===t?void 0:t.language)||"en-us",price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available"}};return{loading:t,error:c,getAllCharacters:j,getCharacter:d,getCharacterByName:b,getAllComics:f,getComic:O,clearError:o}}},39:function(e,t,a){"use strict";var c=a(10),n=a(13),r=a(14),s=a(15),i=a(0),o=a(35),l=a(3),u=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return Object(n.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(l.jsx)(o.a,{}):this.props.children}}]),a}(i.Component);t.a=u},40:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var c=a(7),n=a(5),r=a(0),s=a(36),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:210,a=Object(r.useState)([]),i=Object(n.a)(a,2),o=i[0],l=i[1],u=Object(r.useState)(!1),h=Object(n.a)(u,2),j=h[0],d=h[1],b=Object(r.useState)(t),m=Object(n.a)(b,2),f=m[0],O=m[1],p=Object(r.useState)(!1),v=Object(n.a)(p,2),x=v[0],_=v[1],g=Object(s.a)(),N=g.getAllCharacters,k=g.getAllComics,y=g.loading,C=g.error,w=function(){d(!0),"char"===e?N(f).then(S):k(f).then(S)},S=function(t){var a=!1,n="char"===e?9:8;t.length<n&&(a=!0),l((function(e){return[].concat(Object(c.a)(e),Object(c.a)(t))})),d((function(e){return!1})),O((function(e){return e+n})),_((function(e){return a}))};return{itemList:o,newItemsLoading:j,offset:f,itemsEnded:x,onRequest:w,loading:y,error:C}}},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var c=a(5),n=a(0),r=a(37),s=a(39),i=(a(57),a.p+"static/media/mjolnir.61f31e18.png"),o=a(36),l=a(23),u=a(35),h=a(3),j=function(e){var t=e.char,a=e.onCharSelected,c=t.name,n=t.description,r=t.thumbnail,s=t.homepage,i=t.wiki,o=t.id,l="randomchar__img";return n&&n.length>180&&(n="".concat(n.slice(0,180),"...")),"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"!==r&&"http://i.annihil.us/u/prod/marvel/i/mg/f/60/4c002e0305708.gif"!==r||(l+=" randomchar__img_notFound"),Object(h.jsxs)("div",{className:"randomchar__block",children:[Object(h.jsx)("img",{src:r,alt:"Random character",className:l,onClick:function(){return a(o)}}),Object(h.jsxs)("div",{className:"randomchar__info",children:[Object(h.jsx)("p",{className:"randomchar__name",children:c}),Object(h.jsx)("p",{className:"randomchar__descr",children:n}),Object(h.jsxs)("div",{className:"randomchar__btns",children:[Object(h.jsx)("a",{href:s,className:"button button__main",children:Object(h.jsx)("div",{className:"inner",children:"homepage"})}),Object(h.jsx)("a",{href:i,className:"button button__secondary",children:Object(h.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},d=function(e){var t=Object(n.useState)({}),a=Object(c.a)(t,2),r=a[0],s=a[1],d=Object(o.a)(),b=d.loading,m=d.error,f=d.getCharacter,O=d.clearError,p=e.onCharSelected,v=function(e){s(e)};Object(n.useEffect)((function(){x()}),[]);var x=function(){O();var e=Math.floor(400*Math.random()+1011e3);f(e).then(v)},_=m?Object(h.jsx)(u.a,{}):null,g=b?Object(h.jsx)(l.a,{}):null,N=b||m?null:Object(h.jsx)(j,{char:r,onCharSelected:p});return Object(h.jsxs)("div",{className:"randomchar",children:[_,g,N,Object(h.jsxs)("div",{className:"randomchar__static",children:[Object(h.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(h.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(h.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(h.jsx)("button",{className:"button button__main",onClick:x,children:Object(h.jsx)("div",{className:"inner",children:"try it"})}),Object(h.jsx)("img",{src:i,alt:"mjolnir",className:"randomchar__decoration"})]})]})},b=(a(58),a(40)),m=a(78),f=a(79),O=function(e){var t=Object(b.a)("char"),a=t.itemList,c=t.newItemsLoading,r=t.offset,s=t.itemsEnded,i=t.onRequest,o=t.loading,j=t.error;Object(n.useEffect)((function(){i()}),[]);var d=Object(n.useRef)([]);var O=function(t){var a=t.map((function(t,a){var c={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"!==t.thumbnail&&"http://i.annihil.us/u/prod/marvel/i/mg/f/60/4c002e0305708.gif"!==t.thumbnail||(c={objectFit:"unset"}),Object(h.jsx)(m.a,{timeout:500,children:Object(h.jsxs)("li",{ref:function(e){return d.current[a]=e},className:"char__item",tabIndex:0,onClick:function(){var c;e.onCharSelected(t.id),c=a,d.current.forEach((function(e){return e.classList.remove("char__item_selected")})),d.current[c].classList.add("char__item_selected"),d.current[c].focus()},children:[Object(h.jsx)("img",{src:t.thumbnail,alt:t.name,style:c}),Object(h.jsx)("div",{className:"char__name",children:t.name})]})},t.id)}));return Object(h.jsx)("ul",{className:"char__grid",children:Object(h.jsx)(f.a,{component:null,children:a})})}(a),p=o?Object(h.jsx)(l.a,{}):null,v=j?Object(h.jsx)(u.a,{}):null;return Object(h.jsxs)("div",{className:"char__list",children:[v,p,O,Object(h.jsx)("button",{className:"button button__main button__long",disabled:c,onClick:function(){return i(r)},style:{display:s?"none":"block"},children:Object(h.jsx)("div",{className:"inner",children:"load more"})})]})},p=(a(59),function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(h.jsxs)("div",{className:"skeleton",children:[Object(h.jsxs)("div",{className:"pulse skeleton__header",children:[Object(h.jsx)("div",{className:"pulse skeleton__circle"}),Object(h.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(h.jsx)("div",{className:"pulse skeleton__block"}),Object(h.jsx)("div",{className:"pulse skeleton__block"}),Object(h.jsx)("div",{className:"pulse skeleton__block"})]})]})}),v=(a(60),function(e){var t=e.char,a=t.name,c=t.description,n=t.thumbnail,r=t.homepage,s=t.wiki,i=t.comics,o={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"!==n&&"http://i.annihil.us/u/prod/marvel/i/mg/f/60/4c002e0305708.gif"!==n||(o={objectFit:"unset"}),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"char__basics",children:[Object(h.jsx)("img",{src:n,alt:a,style:o}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"char__info-name",children:a}),Object(h.jsxs)("div",{className:"char__btns",children:[Object(h.jsx)("a",{href:r,className:"button button__main",children:Object(h.jsx)("div",{className:"inner",children:"homepage"})}),Object(h.jsx)("a",{href:s,className:"button button__secondary",children:Object(h.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(h.jsx)("div",{className:"char__descr",children:c}),Object(h.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(h.jsxs)("ul",{className:"char__comics-list",children:[0===i.length?"Information is absent.":null,i.map((function(e,t){return t>9?null:Object(h.jsx)("li",{className:"char__comics-item",children:e.name},t)}))]})]})}),x=function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(o.a)(),j=i.loading,d=i.error,b=i.getCharacter,m=i.clearError;Object(n.useEffect)((function(){return f()}),[e.charId]);var f=function(){m();var t=e.charId;t&&b(t).then((function(e){return s(e)}))},O=d||j||r?null:Object(h.jsx)(p,{}),x=d?Object(h.jsx)(u.a,{}):null,_=j?Object(h.jsx)(l.a,{}):null,g=j||d||!r?null:Object(h.jsx)(v,{char:r});return Object(h.jsxs)("div",{className:"char__info",children:[O,x,_,g]})},_=(a(61),a(71)),g=a(11),N=function(e){var t=e.onCharSearch,a=Object(n.useState)(""),r=Object(c.a)(a,2),s=r[0],i=r[1],l=Object(o.a)(),u=l.getCharacterByName,j=l.clearError,d=l.loading,b=l.error,m=function(e){i(e),t(e[0].id)},f=b?Object(h.jsx)("div",{className:"char__search-error",children:"The server isn't working :("}):null,O=s?s.length>0?Object(h.jsxs)("div",{className:"char__success-wrap",children:[Object(h.jsxs)("div",{className:"char__success-content",children:["There is! Visit ",s[0].name," page?"]}),Object(h.jsx)(g.b,{to:"udemy-project--marvel_webApp/char/".concat(s[0].id),className:"button button__secondary",children:Object(h.jsx)("div",{className:"inner",children:"TO PAGE"})})]}):Object(h.jsx)("div",{className:"char__search-error",children:"The character was not found. Check the name and try again"}):null;return Object(h.jsxs)("div",{className:"char__base",children:[Object(h.jsx)(_.d,{initialValues:{charName:""},validate:function(e){var t={};return e.charName||(t.charName="This field is required!"),t},onSubmit:function(e){!function(e){j(),u(e).then(m)}(e.charName)},children:Object(h.jsx)(_.c,{children:Object(h.jsxs)("div",{className:"char__base-inner",children:[Object(h.jsx)("label",{className:"char__title",children:"Or find a character by name:"}),Object(h.jsx)(_.b,{type:"text",id:"charName",name:"charName",placeholder:"Enter name",className:"char__input"}),Object(h.jsx)("button",{type:"submit",disabled:d,className:"button button__main",children:Object(h.jsx)("div",{className:"inner",children:"FIND"})}),Object(h.jsx)(_.a,{name:"charName",component:"label",className:"char__search-error"})]})})}),f,O]})},k=a.p+"static/media/vision.067d4ae1.png";t.default=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(null),l=Object(c.a)(o,2),u=(l[0],l[1]),j=function(e){i(e)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(r.a,{children:[Object(h.jsx)("meta",{name:"description",content:"Marvel information portal"}),Object(h.jsx)("title",{children:"Marvel information portal"})]}),Object(h.jsx)(s.a,{children:Object(h.jsx)(d,{onCharSelected:j})}),Object(h.jsxs)("div",{className:"char__content",children:[Object(h.jsx)(s.a,{children:Object(h.jsx)(O,{onCharSelected:j})}),Object(h.jsx)("div",{children:Object(h.jsxs)(s.a,{children:[Object(h.jsx)(x,{charId:a}),Object(h.jsx)(N,{onCharSearch:function(e){u(e)}})]})})]}),Object(h.jsx)("img",{className:"bg-decoration",src:k,alt:"vision"})]})}}}]);
//# sourceMappingURL=5.d45941e7.chunk.js.map